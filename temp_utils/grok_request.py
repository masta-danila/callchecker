import os
from dotenv import load_dotenv
from openai import OpenAI

# Загружаем переменные из .env
load_dotenv()
XAI_API_KEY = os.getenv("XAI_API_KEY")

# Инициализация клиента
client = OpenAI(
    api_key=XAI_API_KEY,
    base_url="https://api.x.ai/v1",
)

def get_completion(model_name, messages):
    response = client.chat.completions.create(
        model=model_name,
        messages=messages
    )
    return response.choices[0].message.content

# Пример использования
if __name__ == "__main__":
    model = "grok-3-mini"
    content = """
    Проанализируй запросы. 
    Тематика запросов диджитал маркетинг: seo, создание сайтов, контекстная реклама, serm, orm, внедрение Битрикс 24, техническая поддержка сайтов.
    1. Проверь есть ли в списке запросы, в которых нет намерения совершить покупку, а только поиск не коммерческой информации
    2. Проверь, есть ли в списке запросы, включающие города, НЕ входящие в регионы: Московская область.
    3. Проверь, есть ли в списке запросы, содержащие названия компаний, а также любые контактные данные компаний (теелфоны, адреса, email, мессенджеры), предлагающих услуги по указанной тематике, за исключением крупных сервисов: Яндекс, Google, Битрикс, Brandanalytics и др. 
    4. Проверь есть ли в списке запросы, не связанные  с указанной тематикой.
    Если есть запросы, удовлетворяющие пунктам 1-4 приведи их в виде единого списка python (все запросы в одном списке) без дополнительных уточнений:
    яндекс директ
    директ
    разработка сайта под ключ
    стоимость seo продвижения
    разработка сайтов
    поисковое продвижение seo
    поисковое продвижение seo
    услуги продвижение сайтов в топ яндекса
    seo продвижение
    продвижение сайтов
    продвижение сайтов
    cms
    яндекс реклама
    создание сайтов
    direct
    заказать продвижение сайта
    сео
    seo что это
    seo продвижение сайта
    сео продвижение
    раскрутка сайта
    продвижение
    раскрутка сайтов
    директ про
    яндекс директ настройка рекламы
    seo компания
    yandex direct
    техническая поддержка
    битрикс 24 тарифы и цены
    разработка сайта под ключ цена москва
    что такое seo
    продвижение сайтов москва
    seo оптимизация
    что такое директ
    создание сайта под ключ цена
    я директ
    движок сайта
    корпоративный
    сео что это
    сео оптимизация
    продвижение сайтов в москве
    serm
    настройка контекстной рекламы
    продвижение сайта цена
    seo раскрутка сайта
    продвижение сайта st
    content management system
    продвижение сайта заказать
    сео продвижение сайтов
    что такое сео
    битрикс24 внедрение
    создание сайта под ключ
    аудит сайта
    раскрутка сайта москва
    раскрутка сайта москва
    продвижение сайта в топ 10 москва
    дирек
    разработка сайтов под ключ
    seo продвижение сайта заказать
    ооо продвижение
    продвижение сайта москва
    стоимость создания сайта
    seo продвижение заказать
    битрикс 24 тарифы
    seo продвижение заказать
    сайта продвижение
    разработка сайтов москва
    seo search engine optimization
    агентство контекстной рекламы
    создание и продвижение интернет магазина
    бесплатные cms
    разработка интернет магазинов
    serm это
    seo продвижение это
    раскрутка сайтов москва
    что такое яндекс директ
    разработка сайтов под ключ москва
    лучший движок для сайта
    сайты продвижение
    seo что это такое
    seo продвижение сайта россия
    продвижение раскрутка
    битрикс тарифы
    орд реклама
    сео продвижение это
    система управления сайта
    поисковое продвижение сайта
    создание сайтов в москве
    сео продвижение сайта заказать
    яндекс контекст
    заказать разработку сайта
    сео оптимизация это
    продвижение сайта в москве
    продвижение сайта услуга
    seo раскрутка
    seo оптимизация и продвижение сайтов москва
    seo продвижение интернет магазина заказать
    seo оптимизация что это
    продвижение сайта в топ
    раскрутка сайтов в москве
    """
    messages = [{"role": "user", "content": content}]
    result = get_completion(model, messages)
    print(result)