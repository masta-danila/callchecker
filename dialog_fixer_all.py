import asyncio
from dialog_fixer import fix_dialog
import json
from logger_config import setup_logger

# Настройка логгера для этого модуля
logger = setup_logger('dialog_fixer_all', 'logs/dialog_fixer_all.log')


async def safe_analyze_dialog(dialog_text, retries=3, delay=2) -> dict | None:
    """
    Безопасный вызов fix_dialog с повторными попытками при ошибках.

    :param dialog_text: Текст диалога для анализа.
    :param retries: Количество повторных попыток при ошибках (по умолчанию 3).
    :param delay: Задержка между повторными попытками в секундах (по умолчанию 2).
    :return: Результат анализа диалога или None, если все попытки не удались.
    """
    for attempt in range(retries):
        try:
            result = await fix_dialog(dialog_text)
            logger.info(f"Диалог успешно исправлен с попытки {attempt + 1}")
            return result
        except Exception as e:
            logger.warning(f"Ошибка в попытке {attempt + 1}: {e}")
            if attempt < retries - 1:
                await asyncio.sleep(delay)
            else:
                logger.error(f"Все {retries} попыток исправления диалога провалились")
                return None


async def process_dialog(row, semaphore, delay, retries) -> dict | None:
    """
    Обрабатывает отдельный диалог с использованием семафора и задержки.

    :param row: Словарь с данными диалога.
    :param semaphore: Семафор для ограничения одновременных запросов.
    :param delay: Задержка перед каждым запросом в секундах.
    :param retries: Количество повторных попыток при ошибках.
    :return: Результат обработки диалога.
    """
    async with semaphore:
        logger.info(f"Начинаю исправление диалога {row['id']}")
        await asyncio.sleep(delay)  # Задержка перед каждым запросом
        result = await safe_analyze_dialog(row["dialogue"], retries=retries)
        if result:
            cost = result.get('cost', 0)
            logger.info(f"Завершено исправление диалога {row['id']}, стоимость: {cost}")
        else:
            logger.error(f"Не удалось исправить диалог {row['id']}")
        return result


async def process_dialogs(
        records: dict,
        max_concurrent_requests: int,
        request_delay: float,
        retries: int
) -> dict:
    """
    Принимает данные из БД в формате:
    {
        'table_name': {
            'records': [
                {id, dialogue, ...},
                ...
            ]
        },
        ...
    }
    Асинхронно обрабатывает диалоги и формирует структуру с успешно обработанными записями.

    :param records: Словарь с данными, где ключ – имя таблицы, а значение – словарь с ключом "records".
    :param max_concurrent_requests: Максимальное количество одновременных запросов.
    :param request_delay: Задержка перед каждым запросом в секундах.
    :param retries: Количество повторных попыток при ошибках.
    :return: Словарь с таблицами, где данные представлены в формате:
             { 'table_name': { 'records': [ успешно обработанные записи с обновленными dialogue, summary и status ] } }
    """
    semaphore = asyncio.Semaphore(max_concurrent_requests)
    tasks = []

    # Создаём задачи для обработки диалогов из каждой таблицы
    for table, table_data in records.items():
        rows = table_data.get("records", [])
        for row in rows:
            tasks.append(asyncio.create_task(
                process_dialog(row, semaphore, request_delay, retries)
            ))

    # Асинхронно обрабатываем все диалоги
    results = await asyncio.gather(*tasks, return_exceptions=True)

    failed_requests = 0
    index = 0
    processed_records = {}

    # Формируем результирующую структуру, сохраняя новый формат
    for table, table_data in records.items():
        rows = table_data.get("records", [])
        processed_table = []
        for row in rows:
            result = results[index]
            if isinstance(result, Exception) or result is None:
                failed_requests += 1
                logger.error(f"Ошибка при исправлении диалога {row['id']}")
            else:
                # Обновляем текст диалога результатом анализа
                row["dialogue"] = result["content"]
                # Добавляем резюме диалога
                row["summary"] = result["summary"]
                # Обновляем статус на 'fixed' после успешной обработки
                row["status"] = "fixed"
                processed_table.append(row)
            index += 1
        processed_records[table] = {"records": processed_table}

    total_processed = sum(len(data["records"]) for data in processed_records.values())
    logger.info(f"Успешно исправлено: {total_processed}, Ошибок: {failed_requests}")

    return processed_records


if __name__ == "__main__":
    # Пример входных данных в новом формате
    sample_data = {
        "advertpro": {
            "records": [
                {
                    "id": "2025-01-29 16-32-34 +79067571133.mp3",
                    "dialogue": "1: алло да\n0: алло\n1: сбросилось в общем тогда завтра я вам все высылаю списываемся убираем время и обсуждаем вот уже т бизнес нет все евгений хорошего вечера до завтра\n0: да угу да да да да спасибо до завтра\n1: до свидания"
                },
                {
                    "id": "2025-03-11 15-11-25 +79214078077.mp3",
                    "dialogue": "1: добрый день\n0: алло здравствуйте\n1: здравствуйте\n0: я позвонила в объезд про\n1: да все верно\n0: попала да хотела бы обсудить вот продвижение сайта с кем можно пообщаться\n1: со мной меня роман зовут как вас\n0: меня зовут анна\n1: а\n0: роман смотрите\n1: да угу\n0: да ну сразу к делу\n1: конечно\n0: да ищем подрядчика на следующий сезон мы компания производитель жидкой гидроизоляции вот но оказываем услуги по устройству этой гидроизоляции под ключ то есть у нас больше би ту би такой сегмент получается\n1: угу\n0: вот у нас есть сайт по нашим по нашим услугам\n1: угу\n0: и есть подрядчик сейчас который занимается сео то есть мы все уже занимаемся с двадцатого года где то на уже года четыре наверное\n1: угу достаточно долго уже да так\n0: да то есть ну в принципе какие то ссылки закупаются какие то работы там делаются то есть там сайт не нулевый домен тоже там с какой то уже с историей\n1: истории угу\n0: да нужно там какая то раса то есть есть у него вот я что хотела узнать вот сейчас пока вообще просто даже первое такое приближение сейчас подбираем подрядчика скажите пожалуйста вот у вас в среднем да цена за работу над сайтом она сколько ну если иметь в виду что семантическое дрон у нас ну достаточно небольшое да в принципе услуга одна устройство это гидроизоляции\n1: угу\n0: вот ну и там синонимов там я не знаю ну может быть штук там блин штук пятьдесят наверное максимум там\n1: ну я понимаю узкая тематика у вас но регионы у вас по всей россии\n0: узко да да\n1: получается\n0: смотрите региона у нас нет у нас москва московская область и ближайшие области то есть у нас\n1: ну понятно ну угу\n0: ну да да ну скорее всего ну как бы москва московская область и вот какие то там ну километров пятьсот наверное еще\n1: так\n0: вот и что еще какая вот нам конечно интересно то есть вот сейчас сел подрядчик который у нас работает да он у нас штатный специалист проблема в чем просто гонит нам трафик да то есть как бы и по трафику у нас рост как бы есть у нас так у нас наверное в целом за год ну трафик небольшой у нас там за год выходит где то восемнадцать тысяч то есть это где то по полторы штуки на по полторы тысячи визитов в месяц вот то есть сейчас вот такие показатели у нас вот но гонят в общем всякий вот шлак туда\n1: угу\n0: вот а роста заказов мы не видим\n1: не целевой ну понятно понятно\n0: да то есть да то есть там по конкурентам по каким то вот инфоповодам туда нам туда нагоняют типа сегодня день жестянщика а у нас хорошие цены на там гидроизоляцию да вот нам вот такой вот как бы не нужно нам лучше меньше\n1: подход не нужен угу угу по качеству\n0: да но нам лучше больше больше заявок вот и нам конечно интересны компании которые у которых есть опыт от работы с такими ну примерно с такими компаниями как мы то есть это вот какие то производители\n1: есть есть да\n0: да то есть не ком а вот какие то вот такие услуги вот и которые будут заинтересованы именно вот в заявках да нам даже не столь важны топ какой то позиции да пускай это будет\n1: угу да мы так работаем мы так и работаем вот у нас есть кипиай рит и в вашем случае я бы ну работал по формату абонемент и премия за именно виды вот но\n0: вот да да да отлично\n1: но тут есть важные нюансы мы обычно вы как ведете ну работу с клиентами то есть у вас есть црм или вы как в экселе ведете вот\n0: ну\n1: как у вас акционер\n0: ну нет да у нас битрикс двадцать четыре мы работаем у нас есть да срм у нас интегрирован уже растяжка знаю аналитика\n1: вот вот вот\n0: снимается да с двадцатого года соответственно все предоставляем все доступы отчеты быть да\n1: и замечательно замечательно вот ну мы в таких проектах работаем комплексно то есть ну я не знаю у вас это настроено скорее всего у вас есть интегратор какой то да то есть по битриксу то есть кто поддержку оказывает\n0: ну\n1: вот\n0: ну не совсем у нас есть программист который\n1: свой угу\n0: работает по битриксу вот в принципе но это фриланс надо понимать что не стабильный\n1: а у вас коробочная у вас коробочная версия а обл\n0: облако нет ну у нас облако да\n1: ну программист там не нужен в облаке именно конкретно вот смотрите расскажу в чем суть идеи мы являемся партнерами битрикса то есть и интеграторы и золотые партнеры и в целом посева вы нас нашли в топе вот когда клиентам важны ряды мы работаем по сквозному формату то есть мы становимся интеграторами по битриксу то есть продлеваем лицензию помогаем там либо оказывает тех поддержку как у вас программист например вы ему пишите наверное он там что то делает ну или что то там сломалось например как я представлю мы настраиваем все проверяем цели вот и делаем прогноз по видам то есть сколько рядов привлечем и план с вами согласовываем на первый месяц мы прогноз по дедам не делаем потому что надо поработать с самим сайтом вывести его на первые позиции вот как раз вы сказали шлей слов примерно пятьдесят запросов правильно я понимаю ну такие основные для вас\n0: ну да может быть даже меньше то есть у нас вот тут в программе тот сеошник который работает сейчас да а ну у нас сайт там он посвящен услугам но есть раздел который продает сам материал то есть если кому то нужно нужна эта гидроизоляция которая сам будет ее наносить мы конечно ее продадим вот и сеошник он как раз и пытается гнать трафик вот на эту товарную страницу а нам как бы вот\n1: я понимаю это бесполезно это бесполезно я понял ошибку основную у нас подход немного другой\n0: да да\n1: би ту би сложная тематика вот сразу говорю поэтому тут чисто уйдет работа на еды то есть первое это позиции то что то что вот вы назвали если вы не на первом месте то по сути трафик вы теряете ну целевой вот именно те заказчики которые основные вот мы с вами получается обговариваем вот эти цели то есть собираем конверсию фильтруем мусорные заявки от ни мусорных нужно цели оцеживать в том числе и почту потому что могут писать на почту битуби закупки там и так далее вот\n0: угу\n1: и мы уже работаем конкретно на план по стоимости абонемента он смотрите дело в том что ссылки вообще не работают сейчас в яндексе точно вот поэтому то что вы закупаете ссылки это особого результата не принесет на данный момент вот работает поведенческий фактор вот это основное что дает такой быстрый результат вот я имею в виду топ один топ три то есть вот самый важный запрос потому что даже если вы сейчас уже сами в десятке ну допустим на седьмом месте вы наверное обратили внимание сейчас много занимает реклама\n0: угу\n1: вот и\n0: ну да конечно\n1: люди не листают до конца вот люди не решают\n0: скоро вообще ничего не будет на первой странице только яндекс свой сервис\n1: не ну вряд ли но к этому идет да я понимаю о чем вы говорите вот то есть мы делаем под ключ сео то есть мы можем с вами как договориться ну минимальный бюджет на семьдесят тысяч это с доработками по сайту то есть туда входят услуги там программиста\n0: угу\n1: и так далее то есть мы сами все делаем то есть вот мы говорим что надо переделать страницу вот это вот это вот это согласовываем с вами и сами реализовываем если\n0: угу\n1: у вас есть свой программистам и хотите сами реализовывать то бюджет будет там в районе пятидесяти тысяч вот тут надо просто сравнивать дешевле как делать через нас или чем через вашего триста вот плюс еще\n0: ну да да да\n1: если вам нужно какой нибудь там бантом что то разместить там часы хотелки есть то есть хотелок то есть мы тоже это делаем разумеется\n0: угу\n1: вот ну такие базовые вещи да то есть\n0: угу\n1: ну обычно выгоднее через нас делать ну тут все надо смотреть сколько у вас задач обычно бывает сколько вы платите программистам вот по часам или там оклад вы платите то есть надо просто сравнивать с экономическим вот\n0: угу\n1: что касаемо поведенческого фактора если мы будем работаем с вами по модели абонемент плюс премия за результат то он будет входить вот у нас есть просто абонемент с пф это допустим девяносто тысяч рублей там результат идет практически сразу там первый там второй месяц вот по селу но нужно чтобы было видимость я думаю раз вы занимаете четыре года все вы как минимум там на первой второй странице присутствует скорее всего под этим запросом надо проверить их\n0: не факт я говорю не факт что она присутствуем по каким то может быть таким по несколькочасо может быть мы там есть да\n1: странно тогда тогда тогда странно очень ну давайте как я вам в любом случае анна напишу либо на ватсап там либо на почту перейдем вы мне вот эти запросы которые вас интересуют пришлете хотя бы основные направления мы соберем позиции ваши да стартовые вот и посмотрим в чем причина вот соответственно после первого месяца мы делаем прогнозы по рядам беря доступа ну можем там по битриксу запартнериться там посмотреть там интерацию настроить и соответственно дальше уже план выполняем вы оплачиваете премию премию тоже индивидуально можем обговорить стоимость заявки там процент выполнения плана без проблем\n0: угу\n1: вот с первого месяца мы так работать не можем потому что надо понять погрузиться в проект вашу тематику ну мы можем спрогнозировать какие то количество видов исходя из вашей статистики но это опять же будут не точные данные вот и так же хотел уточнить вы используете контекстную рекламу дополнительно вот если да то выхлоп есть от нее какой то вот по вашему опыту\n0: ну да ну смотрите да по контексту у нас работает другой подрядчик то есть тут все хорошо у нас мы зашел контекст наверное только и как бы существуем да потому что это реально как бы лиды\n1: понял понял угу\n0: вот и ну там все налажено\n1: нет нет нет я не в плане чтобы забрать и просто почему я спрашиваю если он работает какие запросы наиболее эффективные вот то есть мы просто возьмем эти запросы чтобы вы с органики забирали потому что многие вот би ту би многие закупщики им запрещено с контекста оставлять заявку то есть им говорят надо из выдачи брать но некоторые компании у нас такой есть примеры потому что реклама может любой поставщик купить да то есть качественный он не качественный и добросовестный и недобросовестный непонятно\n0: мы пока ну да да да работает да работает контекст работает более менее угу\n1: вот а если вы в топе то ну к вам доверие значит больше вот\n0: угу угу\n1: так по поводу контекста если что если он работает хорошо мы можем запросы просто оттуда взять и посмотреть и их продвинуть ну как вариант\n0: угу\n1: так по поводу предложения тогда я вам напишу на ватсап вы мне пожалуйста пришлите ссылку на сайт и приоритетные запросы не обязательно прям пятьдесят штук вы можете самые основные по вашему мнению мы по ним посмотрим вот и сделаем аудит то есть я вам подготовлю наше видение то есть что с вашим проектом не так ну по нашему мнению да вот что мы рекомендуем сделать и условия вот также небольшой план работ вам предоставлю да на три месяца чтобы вы могли ознакомиться\n0: ну это да это понятно\n1: вот\n0: это можете не предоставлять тут понятно но\n1: угу\n0: да нам главное вот получить какой то хотя бы примерное да стоимость работ которые у нас может получаться вот больше в принципе ничего не интересует потому что очень давно все как бы все работы понятны и собственно тут как бы ну\n1: тут не совсем но видите вы ссылки закупаете они вообще не нужны по сути ну то есть тут такая ситуация сео меняется вот мы два года допустим на первых позициях посев то есть у нас есть компании которые крупнее нас там они там там типа ингейт демис групп и прочее то есть но они не могут нас опережать то есть потому что у них нет технологий банально современных сео оно развивается то есть то что работало три года назад оно да\n0: ну ладно окей да да да да все я просто очень мало времени как бы я поняла хорошо давайте все присылайте тогда пишите мне в ватсап\n1: угу да\n0: номер у вас определился правильно вот я вам скину\n1: да пятьдесят тридцать три на конце я вам сейчас все напишу анна\n0: угу да да да да давайте тогда это и продолжим\n1: угу\n0: потом тогда еще\n1: все хорошо да договорились\n0: угу да спасибо угу жду тогда спасибо"
                },
                {
                    "id": "2025-02-07 14-44-47 +79067571133.mp3",
                    "dialogue": "0: алло\n1: два текста сейчас расскажу смотрите тексты делаем мы и они если брать карточки они не прям уникальные то есть они то шаблонные как и везде ну то есть именно в самих карточках но в разделах будет уникальный текст дело то есть мы берем у вас характеристики дверей цены там и так далее и загружаемые подразделы идут такие уникальные тексты то есть любой сайт вы дверные зайдете там так и сделано у всех может двери например можете зайти то есть вот будет примерно так же то есть текст с нашей стороны то есть они будут заложены ну нами сделаны а карточкой будет заниматься отдельный человек скрывался то есть вы им будете высылать фотографии он их будет обрабатывать монтировать видео вот\n0: я понял давайте на понедельник встречу к обеду сделаем\n1: к обеду с екатериной давайте да да давайте я наверное какого то сеошника лучше еще позову как раз чтобы по текстам она показала рассказала кто людьми занимается\n0: да да не вопрос не вопрос я буду как раз просто с юлей в понедельник пол дня\n1: так вот давайте секунду двенадцать да сейчас я просто по времени смотрю так двенадцать ноль ноль\n0: и думал мы как раз давайте в двенадцать\n1: давайте\n0: давайте не вопрос просто этот мы сейчас за выходные с ней обдумаем все все вопросы обдумаем ваши материалы и\n1: ну смотрите да да да смотрите вот если по карточкам получается шестьсот их максимум да получается даже если по четыреста будет двести сорок тысяч вот это вот эта работа этого специалиста вот у нас это стоило полтора миллиона рублей да то есть ну тысяча рублей стоило короче поэтому ну это неадекватно дорого я понимаю вот поэтому вот рева нашел соответственно по текстам но это там многие тексты они все равно потом меняются потому что все же меняется то есть там текст постоянно обновляет то есть как бы яндекс за этим следит поэтому да приглашу вопросы подготовить как раз к встрече вот те которые вас волнуют и мы все решим в понедельник\n0: у да у меня один вопрос я знаю на него ответ но хочу удостовериться\n1: так\n0: сначала как на физика допустим на юлю делаем сайт потому что на мне стоит другой сайт да на юлю делаем сайт и\n1: угу\n0: скажите мне и после этого я сделаю как на физ лицо после этого я открою какую то там на себя ип дополнительную потом вы кинете\n1: ну смотрите сайт домен надо оформлять на физика вот с нами договор можете хоть на юр лицо это не важно ну то есть мы с физиками не работаем\n0: да да не с вами я с вами разберусь мне за вас не волнует меня волнует могу ли я сначала просто оформить сайт как на физика а потом как в мае месяце когда вы скажете все мы готовы выпускаться да выходить в эфир я открываю ип и оформляю его на ипэшку\n1: а да сайт да угу можно можно но только единственное что там надо будет вы в москве же а вы в клину ну в москву надо будет съездить с паспортом ей вот там в рех ру где будет взамен зарегистрирован написать заявление что на вас переоформляется момент это в личной встрече надо делать\n0: да мне домен не надо я именно за само сам сайт спрашиваю\n1: не не не смотрите объясню сайт не важно на кого оформлен вот именно сам сайт это файл то есть как папка вот самое важное домен вот потому что юридический домен считается сайтом вот и домены должны быть на разные юр лица чтобы продвигаться могли\n0: правильно правильно поэтому я и хочу еще открыть дополнительно\n1: вот и это домен именно домен поэтому я бы вообще на вашем месте не торопился с этим то есть вы можете спокойно ип открыть и уже домен купить на ип вот чтобы не переоформлять\n0: да не могу я купить замену на ип потому что\n1: угу\n0: первое ип будет на меня я могу это только сделать в мае\n1: а понял ну\n0: поэтому у меня я уточняю это первое второе на меня уже роял ну мой основной сайт сделан я не хочу делать эту индексацию так сказать чтоб увидели что на мне кучу сайтов а яндекс все равно где нигде это видит\n1: ну да это не очень хорошо да да да нельзя нельзя так делать правильно да\n0: ну так я вот здесь и хочу да просто сейчас оформить на юлю\n1: без проблем без проблем угу\n0: а потом просто сделать на ип на какое то юридическую компанию ну или я может найду\n1: как хотите тут можно так сделать\n0: найду какую то компанию\n1: без проблем ну можно сайт можно оформлять как на физика так на юрика по главное чтобы разные ну как бы люди были\n0: правильно я и вопрос здесь вот сначала физик потом можно на юрик\n1: можно можно да но это надо будет ей лично ехать в рех ру там писать заявление\n0: вот у меня\n1: переоформление\n0: так опять же так и не понял зачем писать заявление\n1: а это правило то есть вы же регистрируете это обмен ру ну это по законодательству так вот это собственность это машину купили например она оформлена на вас\n0: угу\n1: вот соответственно для того чтобы ее кому то подарить или продать нужно тоже оформить договор передачи вот а он только ну как без проблем мошенничества потому что может мало ли там вы позвоните скажите представитесь юле и скажите сайт мой там типа переделайте им надо лично видеть что этот человек паспорт его что сайт действительно потому что вот есть пример смотрите вы оплачиваете домен каждый год да чтобы он продлевался там какая то сумма если вы забудете заплатить\n0: угу\n1: он будет свободным плавании и допустим люди могут подловить купить его и вам придется у них уже выкупать они бывают дорого стоят вот есть компании которые мониторят чтобы домен украсть вот так поэтому там все серьезно\n0: а вопрос то у меня не в этом же был\n1: ну то что можно переоформить да можно конечно вопрос просто что это не так просто сделать не быстро это будет\n0: хреново\n1: да нет мы поможем ничего страшного такие ситуации бывают вот соответственно я думаю не проблема будет делать\n0: ага\n1: просто некоторым людям приходится из владивостока прилетать в москву то есть даже такое вот\n0: добро давайте\n1: вы хотя бы рядом\n0: я понял а скажите пожалуйста а вы не занимаетесь я хочу запатентовать свой старый сайт и потом соответственно когда вы мне выдадите его давать еще этот новый сайт\n1: угу я не знаю могу уточнить у коллег делали такое я сейчас не сталкивался с патентами\n0: да как бы я раньше\n1: вот угу\n0: был связан с юридическими точками и это стоило стоило восемнадцать тысяч двадцать первом году\n1: угу\n0: сам факт что я не заморачивался я не знаю что ну тонкости\n1: я понял я уточню у коллег\n0: поэтому блин вот это\n1: если что поможем если это сделать\n0: беготня вот это вот правильное оформление вот не знаешь как правильно\n1: угу хорошо подскажем тогда уточню конечно\n0: да и соответственно это дай бог чтобы он получился все хорошо соответственно его тоже патентовать\n1: решим тогда\n0: поэтому мы сейчас с юлей мы можем получается заключая с вами договор вы начинаете делать а потом название или здесь будет зависеть тоже сильно от домена\n1: позже можно позже поэтому я вам и говорю что чисто теоретически можете успеть на юр лицо сразу сделать если в мае он будет готов юр лицо откроете вот а вы на себя как физика вы не хотите оформить просто какая разница а вы как физики были а уже есть понял понял хорошо хорошо тогда я тогда обсудим тогда в понедельник я еще с екатериной посоветуюсь\n0: а на мне уже есть пару сайтов да а если получается у меня есть домен мы этот ваш вы делаете на моем домене сайт\n1: угу угу\n0: а потом в мае месяце я открываю ип на себя\n1: угу\n0: а я регистрирую его на него и меняю название\n1: угу\n0: новый домен это плохо если будет новый домен\n1: ну можно нет почему можно вес передать старого домена на новый то есть вот это вес он имеет каждый домен ну историю грубо говоря то есть более старый домен они лучше прям молодых вот поэтому можно вес передать\n0: что заморочиться\n1: ну ну мы в этом разбираемся\n0: заморочиться получается может у кого то купить заме\n1: да да можно купить старые домены и в один их слить вес это дроп называется дроп замена то есть вы покупаете ну не знаю какой дверь вру ну образно там дверь москва вот и покупайте старые замены какие то и просто вес их передается новому для яндекса это хорошо\n0: то есть это лучше да\n1: ну конечно чем старее домен он\n0: а если сайт тот говно был извините\n1: не важно вы же сайт обновили для яндекса как будто ну оборот занялись сайтом это хорошо он же старый сайт не учтет то есть у вас будет уже новая версия он его переиндексирует проверит\n0: то есть теоретически лучше купить новый старый домен да\n1: да да конечно потому что он будет больше веса иметь вот\n0: я понял\n1: ну мы это поможем у нас же есть специалисты они могут это сделать\n0: так я вот да думаю что у вас все таки больше связи здесь\n1: да да поэтому мы это без проблем выберем лучший вариант для этого\n0: добро принято давайте тогда на двенадцать в понедельник связь\n1: договорились угу\n0: мы подготовим на выходные вопросы и запускаемся тогда чтобы вы к маю хотя бы что то выпустили и потом еще\n1: угу все\n0: полгода индексации вот эти\n1: ну да продвижение ну контекст запустим сразу вот я вам табличку выслал еще потом на встрече покажу другие месяца кстати бюджет не такой большой сто шестьдесят тысяч клиент доволен то есть ряды нормальные то есть две тысячи вид это ну как бы дешево в вашем сегменте\n0: не дело не в бюджете мне дело в том что хотя бы первого сентября я как то начну получать лиды\n1: так вы можете раньше контекст получать чем у вас вы летом летом сезон\n0: я объясню грубо да вы меня поймите да я сейчас лям морожу\n1: угу угу\n0: и еще получается влуплю в сайт там двести триста рублей в месяц\n1: угу\n0: и получается ну чек не плохой и это деньги заморожены поэтому хочется понимать хотя бы примерный чек выхлопа вот я к чему ну как говорится три вариант\n1: так я вам отправил девяносто видов это было в июне девяносто пять рядов ну не все купили ну вот так посчитайте сколько у вас дверь стоит то есть маржинальность то есть это уже ну с первого месяца по сути можно делать вот за сто семьдесят тысяч вот поэтому из контекста результат он быстро идет это же не сева посева да нужно будет ждать полгода вот а с контекста у вас результат пойдет сразу как сайт будет готов в интернете\n0: дай бог дай бог\n1: вот поэтому\n0: добро\n1: стратегия такая с вами будет все тогда\n0: а я\n1: что еще раз\n0: да последний последний вопрос\n1: да\n0: вы как хакеры там всем сайты делаете да какие перечень названий никаких у вас там не валяется просто сейчас у меня тринадцать сайтов и я что то уже в названиях не знаю какие названия вдумывать\n1: надо подумать почему поможем ну екатерина она занимается этим вопросом как раз я ей скажу она настоящий предложит вариант\n0: что реально уже тупим\n1: ну я понял да тяжело тяжело придумать\n0: какое название у нас там десять доменов и получается уже вроде все обозвали а эти домены чтобы вы понимали вот даже у меня есть сайт и сайт лейдинг и этот авито рус двери блин засранцы просто начали копировать рус двери а только логотип поменяли ну что блин вы такие тупые не можете придумать я его просто придумал в прошлом позапрошлом году они меня начали копировать уже\n1: угу угу у ну вот это да такое бывает к сожалению\n0: поэтому я хочу какой то уникальное которое его даже не будет и сразу нафиг его запатентовать\n1: ну да чтобы не украли\n0: да чтобы никто его не копировал\n1: ну там тогда лучше вам купить несколько доменов то есть допустим ну вот у двери ру двери рф то есть чтобы не украли у вас название вот можно будет тогда сразу все вариации возможные с названием тем более сегодня\n0: все добро тогда во вторник в понедельник к двенадцати да\n1: а понедельник в понедельник свяжемся да евгений все если что то поменяется пишите да до свидания\n0: да все спасибо"
                }
            ]
        },
        "test": {
            "records": [
                {
                    "id": "2025-01-29 16-32-34 +79067571133.mp3",
                    "dialogue": "1: алло да\n0: алло\n1: сбросилось в общем тогда завтра я вам все высылаю списываемся убираем время и обсуждаем вот уже т бизнес нет все евгений хорошего вечера до завтра\n0: да угу да да да да спасибо до завтра\n1: до свидания"
                },
                {
                    "id": "2025-03-11 15-11-25 +79214078077.mp3",
                    "dialogue": "1: добрый день\n0: алло здравствуйте\n1: здравствуйте\n0: я позвонила в объезд про\n1: да все верно\n0: попала да хотела бы обсудить вот продвижение сайта с кем можно пообщаться\n1: со мной меня роман зовут как вас\n0: меня зовут анна\n1: а\n0: роман смотрите\n1: да угу\n0: да ну сразу к делу\n1: конечно\n0: да ищем подрядчика на следующий сезон мы компания производитель жидкой гидроизоляции вот но оказываем услуги по устройству этой гидроизоляции под ключ то есть у нас больше би ту би такой сегмент получается\n1: угу\n0: вот у нас есть сайт по нашим по нашим услугам\n1: угу\n0: и есть подрядчик сейчас который занимается сео то есть мы все уже занимаемся с двадцатого года где то на уже года четыре наверное\n1: угу достаточно долго уже да так\n0: да то есть ну в принципе какие то ссылки закупаются какие то работы там делаются то есть там сайт не нулевый домен тоже там с какой то уже с историей\n1: истории угу\n0: да нужно там какая то раса то есть есть у него вот я что хотела узнать вот сейчас пока вообще просто даже первое такое приближение сейчас подбираем подрядчика скажите пожалуйста вот у вас в среднем да цена за работу над сайтом она сколько ну если иметь в виду что семантическое дрон у нас ну достаточно небольшое да в принципе услуга одна устройство это гидроизоляции\n1: угу\n0: вот ну и там синонимов там я не знаю ну может быть штук там блин штук пятьдесят наверное максимум там\n1: ну я понимаю узкая тематика у вас но регионы у вас по всей россии\n0: узко да да\n1: получается\n0: смотрите региона у нас нет у нас москва московская область и ближайшие области то есть у нас\n1: ну понятно ну угу\n0: ну да да ну скорее всего ну как бы москва московская область и вот какие то там ну километров пятьсот наверное еще\n1: так\n0: вот и что еще какая вот нам конечно интересно то есть вот сейчас сел подрядчик который у нас работает да он у нас штатный специалист проблема в чем просто гонит нам трафик да то есть как бы и по трафику у нас рост как бы есть у нас так у нас наверное в целом за год ну трафик небольшой у нас там за год выходит где то восемнадцать тысяч то есть это где то по полторы штуки на по полторы тысячи визитов в месяц вот то есть сейчас вот такие показатели у нас вот но гонят в общем всякий вот шлак туда\n1: угу\n0: вот а роста заказов мы не видим\n1: не целевой ну понятно понятно\n0: да то есть да то есть там по конкурентам по каким то вот инфоповодам туда нам туда нагоняют типа сегодня день жестянщика а у нас хорошие цены на там гидроизоляцию да вот нам вот такой вот как бы не нужно нам лучше меньше\n1: подход не нужен угу угу по качеству\n0: да но нам лучше больше больше заявок вот и нам конечно интересны компании которые у которых есть опыт от работы с такими ну примерно с такими компаниями как мы то есть это вот какие то производители\n1: есть есть да\n0: да то есть не ком а вот какие то вот такие услуги вот и которые будут заинтересованы именно вот в заявках да нам даже не столь важны топ какой то позиции да пускай это будет\n1: угу да мы так работаем мы так и работаем вот у нас есть кипиай рит и в вашем случае я бы ну работал по формату абонемент и премия за именно виды вот но\n0: вот да да да отлично\n1: но тут есть важные нюансы мы обычно вы как ведете ну работу с клиентами то есть у вас есть црм или вы как в экселе ведете вот\n0: ну\n1: как у вас акционер\n0: ну нет да у нас битрикс двадцать четыре мы работаем у нас есть да срм у нас интегрирован уже растяжка знаю аналитика\n1: вот вот вот\n0: снимается да с двадцатого года соответственно все предоставляем все доступы отчеты быть да\n1: и замечательно замечательно вот ну мы в таких проектах работаем комплексно то есть ну я не знаю у вас это настроено скорее всего у вас есть интегратор какой то да то есть по битриксу то есть кто поддержку оказывает\n0: ну\n1: вот\n0: ну не совсем у нас есть программист который\n1: свой угу\n0: работает по битриксу вот в принципе но это фриланс надо понимать что не стабильный\n1: а у вас коробочная у вас коробочная версия а обл\n0: облако нет ну у нас облако да\n1: ну программист там не нужен в облаке именно конкретно вот смотрите расскажу в чем суть идеи мы являемся партнерами битрикса то есть и интеграторы и золотые партнеры и в целом посева вы нас нашли в топе вот когда клиентам важны ряды мы работаем по сквозному формату то есть мы становимся интеграторами по битриксу то есть продлеваем лицензию помогаем там либо оказывает тех поддержку как у вас программист например вы ему пишите наверное он там что то делает ну или что то там сломалось например как я представлю мы настраиваем все проверяем цели вот и делаем прогноз по видам то есть сколько рядов привлечем и план с вами согласовываем на первый месяц мы прогноз по дедам не делаем потому что надо поработать с самим сайтом вывести его на первые позиции вот как раз вы сказали шлей слов примерно пятьдесят запросов правильно я понимаю ну такие основные для вас\n0: ну да может быть даже меньше то есть у нас вот тут в программе тот сеошник который работает сейчас да а ну у нас сайт там он посвящен услугам но есть раздел который продает сам материал то есть если кому то нужно нужна эта гидроизоляция которая сам будет ее наносить мы конечно ее продадим вот и сошник он как раз и пытается гнать трафик вот на эту товарную страницу а нам как бы вот\n1: я понимаю это бесполезно это бесполезно я понял ошибку основную у нас подход немного другой\n0: да да\n1: би ту би сложная тематика вот сразу говорю поэтому тут чисто уйдет работа на еды то есть первое это позиции то что то что вот вы назвали если вы не на первом месте то по сути трафик вы теряете ну целевой вот именно те заказчики которые основные вот мы с вами получается обговариваем вот эти цели то есть собираем конверсию фильтруем мусорные заявки от ни мусорных нужно цели оцеживать в том числе и почту потому что могут писать на почту битуби закупки там и так далее вот\n0: угу\n1: и мы уже работаем конкретно на план по стоимости абонемента он смотрите дело в том что ссылки вообще не работают сейчас в яндексе точно вот поэтому то что вы закупаете ссылки это особого результата не принесет на данный момент вот работает поведенческий фактор вот это основное что дает такой быстрый результат вот я имею в виду топ один топ три то есть вот самый важный запрос потому что даже если вы сейчас уже сами в десятке ну допустим на седьмом месте вы наверное обратили внимание сейчас много занимает реклама\n0: угу\n1: вот и\n0: ну да конечно\n1: люди не листают до конца вот люди не решают\n0: е скоро вообще ничего не будет на первой странице только яндекс свой сервис\n1: не ну вряд ли но к этому идет да я понимаю о чем вы говорите вот то есть мы делаем под ключ сео то есть мы можем с вами как договориться ну минимальный бюджет на семьдесят тысяч это с доработками по сайту то есть туда входят услуги там программиста\n0: угу\n1: и так далее то есть мы сами все делаем то есть вот мы говорим что надо переделать страницу вот это вот это вот это согласовываем с вами и сами реализовываем если\n0: угу\n1: у вас есть свой программистам и хотите сами реализовывать то бюджет будет там в районе пятидесяти тысяч вот тут надо просто сравнивать дешевле как делать через нас или чем через вашего триста вот плюс еще\n0: ну да да да\n1: если вам нужно какой нибудь там бантом что то разместить там часы хотелки есть то есть хотелок то есть мы тоже это делаем разумеется\n0: угу\n1: вот ну такие базовые вещи да то есть\n0: угу\n1: ну обычно выгоднее через нас делать ну тут все надо смотреть сколько у вас задач обычно бывает сколько вы платите программистам вот по часам или там оклад вы платите то есть надо просто сравнивать с экономическим вот\n0: угу\n1: что касаемо поведенческого фактора если мы будем работаем с вами по модели абонемент плюс премия за результат то он будет входить вот у нас есть просто абонемент с пф это допустим девяносто тысяч рублей там результат идет практически сразу там первый там второй месяц вот по селу но нужно чтобы было видимость я думаю раз вы занимаете четыре года все вы как минимум там на первой второй странице присутствует скорее всего под этим запросом надо проверить их\n0: не факт я говорю не факт что она присутствуем по каким то может быть таким по несколькочасо может быть мы там есть да\n1: странно тогда тогда тогда странно очень ну давайте как я вам в любом случае анна напишу либо на ватсап там либо на почту перейдем вы мне вот эти запросы которые вас интересуют пришлете хотя бы основные направления мы соберем позиции ваши да стартовые вот и посмотрим в чем причина вот соответственно после первого месяца мы делаем прогнозы по рядам беря доступа ну можем там по битриксу запартнериться там посмотреть там интерацию настроить и соответственно дальше уже план выполняем вы оплачиваете премию премию тоже индивидуально можем обговорить стоимость заявки там процент выполнения плана без проблем\n0: угу\n1: вот с первого месяца мы так работать не можем потому что надо понять погрузиться в проект вашу тематику ну мы можем спрогнозировать какие то количество видов исходя из вашей статистики но это опять же будут не точные данные вот и так же хотел уточнить вы используете контекстную рекламу дополнительно вот если да то выхлоп есть от нее какой то вот по вашему опыту\n0: ну да ну смотрите да по контексту у нас работает другой подрядчик то есть тут все хорошо у нас мы зашел контекст наверное только и как бы существуем да потому что это реально как бы лиды\n1: понял понял угу\n0: вот и ну там все налажено\n1: нет нет нет я не в плане чтобы забрать и просто почему я спрашиваю если он работает какие запросы наиболее эффективные вот то есть мы просто возьмем эти запросы чтобы вы с органики забирали потому что многие вот би ту би многие закупщики им запрещено с контекста оставлять заявку то есть им говорят надо из выдачи брать но некоторые компании у нас такой есть примеры потому что реклама может любой поставщик купить да то есть качественный он не качественный и добросовестный и недобросовестный непонятно\n0: мы пока ну да да да работает да работает контекст работает более менее угу\n1: вот а если вы в топе то ну к вам доверие значит\n0: угу\n1: больше вот\n0: угу\n1: так по поводу контекста если что если он работает хорошо мы можем запросы просто оттуда взять и посмотреть и их продвинуть ну как вариант\n0: угу\n1: так по поводу предложения тогда я вам напишу на ватсап вы мне пожалуйста пришлите ссылку на сайт и приоритетные запросы не обязательно прям пятьдесят штук вы можете самые основные по вашему мнению мы по ним посмотрим вот и сделаем аудит то есть я вам подготовлю наше видение то есть что с вашим проектом не так ну по нашему мнению да вот что мы рекомендуем сделать и условия вот также небольшой план работ вам предоставлю да на три месяца чтобы вы могли ознакомиться\n0: ну это да это понятно\n1: вот\n0: это можете не предоставлять тут понятно но\n1: угу\n0: да нам главное вот получить какой то хотя бы примерное да стоимость работ которые у нас может получаться вот больше в принципе ничего не интересует потому что очень давно все как бы все работы понятны и собственно тут как бы ну\n1: тут не совсем но видите вы ссылки закупаете они вообще не нужны по сути ну то есть тут такая ситуация сео меняется вот мы два года допустим на первых позициях посев то есть у нас есть компании которые крупнее нас там они там там типа ингейт демис групп и прочее то есть но они не могут нас опережать то есть потому что у них нет технологий банально современных сео оно развивается то есть то что работало три года назад оно да\n0: ну ладно окей да да да да все я просто очень мало времени как бы я поняла хорошо давайте все присылайте тогда пишите мне в ватсап\n1: угу да\n0: номер у вас определился правильно вот я вам скину\n1: да пятьдесят тридцать три на конце я вам сейчас все напишу анна\n0: угу да да да да давайте тогда это и продолжим\n1: угу\n0: потом тогда еще\n1: все хорошо да договорились\n0: угу да спасибо угу жду тогда спасибо"
                },
                {
                    "id": "2025-02-07 14-44-47 +79067571133.mp3",
                    "dialogue": "0: алло\n1: два текста сейчас расскажу смотрите тексты делаем мы и они если брать карточки они не прям уникальные то есть они то шаблонные как и везде ну то есть именно в самих карточках но в разделах будет уникальный текст дело то есть мы берем у вас характеристики дверей цены там и так далее и загружаемые подразделы идут такие уникальные тексты то есть любой сайт вы дверные зайдете там так и сделано у всех может двери например можете зайти то есть вот будет примерно так же то есть текст с нашей стороны то есть они будут заложены ну нами сделаны а карточкой будет заниматься отдельный человек скрывался то есть вы им будете высылать фотографии он их будет обрабатывать монтировать видео вот\n0: я понял давайте на понедельник встречу к обеду сделаем\n1: к обеду с екатериной давайте да да давайте я наверное какого то сеошника лучше еще позову как раз чтобы по текстам она показала рассказала кто людьми занимается\n0: да да не вопрос не вопрос я буду как раз просто с юлей в понедельник пол дня\n1: так вот давайте секунду двенадцать да сейчас я просто по времени смотрю так двенадцать ноль ноль\n0: и думал мы как раз давайте в двенадцать\n1: давайте\n0: давайте не вопрос просто этот мы сейчас за выходные с ней обдумаем все все вопросы обдумаем ваши материалы и\n1: ну смотрите да да да смотрите вот если по карточкам получается шестьсот их максимум да получается даже если по четыреста будет двести сорок тысяч вот это вот эта работа этого специалиста вот у нас это стоило полтора миллиона рублей да то есть ну тысяча рублей стоило короче поэтому ну это неадекватно дорого я понимаю вот поэтому вот рева нашел соответственно по текстам но это там многие тексты они все равно потом меняются потому что все же меняется то есть там текст постоянно обновляет то есть как бы яндекс за этим следит поэтому да приглашу вопросы подготовить как раз к встрече вот те которые вас волнуют и мы все решим в понедельник\n0: у да у меня один вопрос я знаю на него ответ но хочу удостовериться\n1: так\n0: сначала как на физика допустим на юлю делаем сайт потому что на мне стоит другой сайт да на юлю делаем сайт и\n1: угу\n0: скажите мне и после этого я сделаю как на физ лицо после этого я открою какую то там на себя ип дополнительную потом вы кинете\n1: ну смотрите сайт домен надо оформлять на физика вот с нами договор можете хоть на юр лицо это не важно ну то есть мы с физиками не работаем\n0: да да не с вами я с вами разберусь мне за вас не волнует меня волнует могу ли я сначала просто оформить сайт как на физика а потом как в мае месяце когда вы скажете все мы готовы выпускаться да выходить в эфир я открываю ип и оформляю его на ипэшку\n1: а да сайт да угу можно можно но только единственное что там надо будет вы в москве же а вы в клину ну в москву надо будет съездить с паспортом ей вот там в рех ру где будет взамен зарегистрирован написать заявление что на вас переоформляется момент это в личной встрече надо делать\n0: да мне домен не надо я именно за само сам сайт спрашиваю\n1: не не не смотрите объясню сайт не важно на кого оформлен вот именно сам сайт это файл то есть как папка вот самое важное домен вот потому что юридический домен считается сайтом вот и домены должны быть на разные юр лица чтобы продвигаться могли\n0: правильно правильно поэтому я и хочу еще открыть дополнительно\n1: вот и это домен именно домен поэтому я бы вообще на вашем месте не торопился с этим то есть вы можете спокойно ип открыть и уже домен купить на ип вот чтобы не переоформлять\n0: да не могу я купить замену на ип потому что\n1: угу\n0: первое ип будет на меня я могу это только сделать в мае\n1: а понял ну\n0: поэтому у меня я уточняю это первое второе на меня уже роял ну мой основной сайт сделан я не хочу делать эту индексацию так сказать чтоб увидели что на мне кучу сайтов а яндекс все равно где нигде это видит\n1: ну да это не очень хорошо да да да нельзя нельзя так делать правильно да\n0: ну так я вот здесь и хочу да просто сейчас оформить на юлю\n1: без проблем без проблем угу\n0: а потом просто сделать на ип на какое то юридическую компанию ну или я может найду\n1: как хотите тут можно так сделать\n0: найду какую то компанию\n1: без проблем ну можно сайт можно оформлять как на физика так на юрика по главное чтобы разные ну как бы люди были\n0: правильно я и вопрос здесь вот сначала физик потом можно на юрик\n1: можно можно да но это надо будет ей лично ехать в рех ру там писать заявление\n0: вот у меня\n1: переоформление\n0: так опять же так и не понял зачем писать заявление\n1: а это правило то есть вы же регистрируете это обмен ру ну это по законодательству так вот это собственность это машину купили например она оформлена на вас\n0: угу\n1: вот соответственно для того чтобы ее кому то подарить или продать нужно тоже оформить договор передачи вот а он только ну как без проблем мошенничества потому что может мало ли там вы позвоните скажите представитесь юле и скажите сайт мой там типа переделайте им надо лично видеть что этот человек паспорт его что сайт действительно потому что вот есть пример смотрите вы оплачиваете домен каждый год да чтобы он продлевался там какая то сумма если вы забудете заплатить\n0: угу\n1: он будет свободным плавании и допустим люди могут подловить купить его и вам придется у них уже выкупать они бывают дорого стоят вот есть компании которые мониторят чтобы домен украсть вот так поэтому там все серьезно\n0: а вопрос то у меня не в этом же был\n1: ну то что можно переоформить да можно конечно вопрос просто что это не так просто сделать не быстро это будет\n0: хреново\n1: да нет мы поможем ничего страшного такие ситуации бывают вот соответственно я думаю не проблема будет делать\n0: ага\n1: просто некоторым людям приходится из владивостока прилетать в москву то есть даже такое вот\n0: добро давайте\n1: вы хотя бы рядом\n0: я понял а скажите пожалуйста а вы не занимаетесь я хочу запатентовать свой старый сайт и потом соответственно когда вы мне выдадите его давать еще этот новый сайт\n1: угу я не знаю могу уточнить у коллег делали такое я сейчас не сталкивался с патентами\n0: да как бы я раньше\n1: вот угу\n0: был связан с юридическими точками и это стоило стоило восемнадцать тысяч двадцать первом году\n1: угу\n0: сам факт что я не заморачивался я не знаю что ну тонкости\n1: я понял я уточню у коллег\n0: поэтому блин вот это\n1: если что поможем если это сделать\n0: беготня вот это вот правильное оформление вот не знаешь как правильно\n1: угу хорошо подскажем тогда уточню конечно\n0: да и соответственно это дай бог чтобы он получился все хорошо соответственно его тоже патентовать\n1: решим тогда\n0: поэтому мы сейчас с юлей мы можем получается заключая с вами договор вы начинаете делать а потом название или здесь будет зависеть тоже сильно от домена\n1: позже можно позже поэтому я вам и говорю что чисто теоретически можете успеть на юр лицо сразу сделать если в мае он будет готов юр лицо откроете вот а вы на себя как физика вы не хотите оформить просто какая разница а вы как физики были а уже есть понял понял хорошо хорошо тогда я тогда обсудим тогда в понедельник я еще с екатериной посоветуюсь\n0: а на мне уже есть пару сайтов да а если получается у меня есть домен мы этот ваш вы делаете на моем домене сайт\n1: угу угу\n0: а потом в мае месяце я открываю ип на себя\n1: угу\n0: а я регистрирую его на него и меняю название\n1: угу\n0: новый домен это плохо если будет новый домен\n1: ну можно нет почему можно вес передать старого домена на новый то есть вот это вес он имеет каждый домен ну историю грубо говоря то есть более старый домен они лучше прям молодых вот поэтому можно вес передать\n0: что заморочиться\n1: ну ну мы в этом разбираемся\n0: заморочиться получается может у кого то купить заме\n1: да да можно купить старые домены и в один их слить вес это дроп называется дроп замена то есть вы покупаете ну не знаю какой дверь вру ну образно там дверь москва вот и покупайте старые замены какие то и просто вес их передается новому для яндекса это хорошо\n0: то есть это лучше да\n1: ну конечно чем старее домен он\n0: а если сайт тот говно был извините\n1: не важно вы же сайт обновили для яндекса как будто ну оборот занялись сайтом это хорошо он же старый сайт не учтет то есть у вас будет уже новая версия он его переиндексирует проверит\n0: то есть теоретически лучше купить новый старый домен да\n1: да да конечно потому что он будет больше веса иметь вот\n0: я понял\n1: ну мы это поможем у нас же есть специалисты они могут это сделать\n0: так я вот да думаю что у вас все таки больше связи здесь\n1: да да поэтому мы это без проблем выберем лучший вариант для этого\n0: добро принято давайте тогда на двенадцать в понедельник связь\n1: договорились угу\n0: мы подготовим на выходные вопросы и запускаемся тогда чтобы вы к маю хотя бы что то выпустили и потом еще\n1: угу все\n0: полгода индексации вот эти\n1: ну да продвижение ну контекст запустим сразу вот я вам табличку выслал еще потом на встрече покажу другие месяца кстати бюджет не такой большой сто шестьдесят тысяч клиент доволен то есть ряды нормальные то есть две тысячи вид это ну как бы дешево в вашем сегменте\n0: не дело не в бюджете мне дело в том что хотя бы первого сентября я как то начну получать лиды\n1: так вы можете раньше контекст получать чем у вас вы летом летом сезон\n0: я объясню грубо да вы меня поймите да я сейчас лям морожу\n1: угу угу\n0: и еще получается влуплю в сайт там двести триста рублей в месяц\n1: угу\n0: и получается ну чек не плохой и это деньги заморожены поэтому хочется понимать хотя бы примерный чек выхлопа вот я к чему ну как говорится три вариант\n1: так я вам отправил девяносто видов это было в июне девяносто пять рядов ну не все купили ну вот так посчитайте сколько у вас дверь стоит то есть маржинальность то есть это уже ну с первого месяца по сути можно делать вот за сто семьдесят тысяч вот поэтому из контекста результат он быстро идет это же не сева посева да нужно будет ждать полгода вот а с контекста у вас результат пойдет сразу как сайт будет готов в интернете\n0: дай бог дай бог\n1: вот поэтому\n0: добро\n1: стратегия такая с вами будет все тогда\n0: а я\n1: что еще раз\n0: да последний последний вопрос\n1: да\n0: вы как хакеры там всем сайты делаете да какие перечень названий никаких у вас там не валяется просто сейчас у меня тринадцать сайтов и я что то уже в названиях не знаю какие названия вдумывать\n1: надо подумать почему поможем ну екатерина она занимается этим вопросом как раз я ей скажу она настоящий предложит вариант\n0: что реально уже тупим\n1: ну я понял да тяжело тяжело придумать\n0: какое название у нас там десять доменов и получается уже вроде все обозвали а эти домены чтобы вы понимали вот даже у меня есть сайт и сайт лейдинг и этот авито рус двери блин засранцы просто начали копировать рус двери а только логотип поменяли ну что блин вы такие тупые не можете придумать я его просто придумал в прошлом позапрошлом году они меня начали копировать уже\n1: угу угу у ну вот это да такое бывает к сожалению\n0: поэтому я хочу какой то уникальное которое его даже не будет и сразу нафиг его запатентовать\n1: ну да чтобы не украли\n0: да чтобы никто его не копировал\n1: ну там тогда лучше вам купить несколько доменов то есть допустим ну вот у двери ру двери рф то есть чтобы не украли у вас название вот можно будет тогда сразу все вариации возможные с названием тем более сегодня\n0: все добро тогда во вторник в понедельник к двенадцати да\n1: а понедельник в понедельник свяжемся да евгений все если что то поменяется пишите да до свидания\n0: да все спасибо"
                }
            ]
        }
    }

    # Параметры: ограничение на 50 одновременных запросов, задержка 0.1 секунда, 3 попытки при ошибке
    processed_dialogues = asyncio.run(
        process_dialogs(sample_data, max_concurrent_requests=50, request_delay=0.1, retries=3)
    )
